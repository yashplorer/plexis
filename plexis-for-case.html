<head>
	<title>plexis</title>
</head>

<body>{{> page}}</body>

<template name="page">
	<div id="login" style="float: right;">{{> login}}</div>
	<div id="user">{{> user}}</div>
	<div id="conversation">{{> conversation}}</div>
	<div id="register">{{> register}}</div>
	<div id="logout">{{> logout}}</div>
</template>

<template name="user">
	User: {{user}}
</template>

<template name="logout">
	<input type="submit" id="sign-out" value="Sign out" />

</template>

<template name="conversation">
	
	{{#if branches}}
		{{#each branches}}
			<div class="branch" data-branchid="{{branchId}}">
				BRANCH {{branchId}}
			{{#each messages}}
				 <li id="{{_id}}" data-parentid="{{parentId}}" data-branchId="{{branchId}}"><span class="username">{{username}}</span>: <span class="message-text">{{message}}</span> <span class="time">At {{timestamp}}</span> <input type="hidden" class="owner" value={{owner}}> <a class="branch-link" href="#">Branch</a></li>
			{{/each}}
				<input id="message-branch-{{branchId}}" class="message" type="text" placeholder="Type message here"/>
				<input id="submit-branch-{{branchId}}" class="submit" type="submit"/>
			</div>
		{{/each}}
	{{else}}
		<div class="branch" data-branchid="0">
			<p id="notice">Get this chat started</p>
			<input id="message-branch-0" class="message" type="text" placeholder="Type message here"/>
			<input id="submit-branch-0" class="submit" type="submit"/>
		</div>
	{{/if}}

</template>

<template name="register">
	<div class="register-form">
		<input type="email" placeholder="email" id="account-email" />
		<input type="password" placeholder="password" id="account-password" />
		<input type="full-name" placeholder="screen name" id="account-name" />
		<input type="submit" id="create-account" value="Create an Account" />
	</div>
</template>

<template name="login">
	<div class="login-form">    
		<input type="email" placeholder="email" id="login-email" />
		<input type="password" placeholder="password" id="login-password" />
		<input type="submit" id="login-button" value="Sign in" />
		or
		<input type="submit" id="create-user" value="Sign up" />
	</div>
</template>

